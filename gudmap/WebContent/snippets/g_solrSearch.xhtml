<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:pr="http://primefaces.org/ui" >
	
	
    <pr:overlayPanel id="solrSearchPanel" for="solrSearchBtn" dismissable="false" appendToBody="false" showEffect="slide" hideEffect="slide" dynamic="false" showCloseIcon="true" style="font-size: 12px">
  	 
     <h:form id="solrsearchform">  
 
 <ui:remove>
		 <h:panelGrid id="id_filters" columns="1">
		     <c:forEach items="#{solrFilter.filters}" var="filter">
				<h:panelGrid columns="2" >	
					<h:outputText value="#{filter.key}:#{filter.value} " />	
		 			<h:graphicImage id="#{filter.key}" library="images/resources" name="cancel.png" width="10" height="10">
			 			<pr:ajax event="click" update=":solrsearchform " listener="#{solrFilter.removeFilter}" />
					</h:graphicImage>
				</h:panelGrid>
		    </c:forEach>  
		</h:panelGrid>    
</ui:remove>
 
		<h:panelGrid columns="3" columnClasses="gd_celltextleft,gd_celltextright" styleClass="gd_solr_form">
			<h:inputText value="#{solrTreeBean.solrInput}" ></h:inputText>
			<h:commandButton value="Search" image="/resources/images/resources/search2.png" action="#{solrTreeBean.goSearch}" >
				<f:param name="solrInput" value="#{solrTreeBean.solrInput}"/>
				<f:ajax execute="@form" render=":solrsearchform :solr_dataform :solr_title" ></f:ajax>
			</h:commandButton>
				
			<pr:commandLink id="solrFilterBtn"  actionListener="#{solrFilter.refresh}">
				<h:graphicImage library="images/resources" name="filter_add.png" width="25" height="25"/>
			</pr:commandLink>
		</h:panelGrid>

		
 		<pr:overlayPanel id="solrFilterPanel" for="solrFilterBtn" dismissable="false" appendToBody="false" showEffect="slide" hideEffect="slide" dynamic="false" showCloseIcon="true" style="width:500px">
 
	 		<pr:accordionPanel id="id_accordion" activeIndex="-1" >
	 	 		<pr:tab title="Genes">
				 	<h:outputText value="Gene: "></h:outputText>
				 	<h:inputText value="#{solrFilter.geneValue}" >
				 		<pr:ajax update=":solrsearchform :solr_dataform :solr_title " listener="#{solrFilter.refresh}" />
				 	</h:inputText>
				</pr:tab>
				<pr:tab title="Submission Date">
			 		<h:panelGrid columns="2">
			 			<h:outputText value="From:"></h:outputText>
			 			<pr:calendar widgetVar="fromDate" maxdate="#{paramBean.maxDate}" pattern="dd-MMM-yyyy" navigator="true" value="#{solrFilter.fromDateValue}">
			 				<pr:ajax event="dateSelect" update=":solrsearchform :solr_dataform :solr_title" listener="#{solrFilter.refresh}" />
			 			</pr:calendar>
			 			<h:outputText value="To:"></h:outputText>
			 			<pr:calendar widgetVar="toDate" maxdate="#{paramBean.maxDate}" pattern="dd-MMM-yyyy" navigator="true" value="#{solrFilter.toDateValue}">
			 				<pr:ajax event="dateSelect" update=":solrsearchform :solr_dataform :solr_title" listener="#{solrFilter.refresh}" />
			 			</pr:calendar>
			 		</h:panelGrid>
				</pr:tab>
				<pr:tab title="Sources">
				<h:panelGrid columns="3">
				 	<h:selectManyCheckbox size="5" value="#{solrFilter.sourceValues}" layout="pageDirection">
				 		<f:selectItems value="#{solrFilter.sourceList}" />
				 		<pr:ajax update=":solrsearchform :solr_dataform :solr_title :id_filters" listener="#{solrFilter.refresh}" />
				 	</h:selectManyCheckbox>
			 	</h:panelGrid>
				</pr:tab>
				<pr:tab title="Assay Types">
				 	<h:selectManyCheckbox size="5" value="#{solrFilter.assayTypeValues}" layout="pageDirection">
				 		<f:selectItems value="#{solrFilter.assayTypeList}" />
				 		<pr:ajax update=":solrsearchform :solr_dataform :solr_title :id_filters" listener="#{solrFilter.refresh}" />
				 	</h:selectManyCheckbox>
				</pr:tab>
				<pr:tab title="Theiler Stages">
				 	<h:selectManyCheckbox size="5" value="#{solrFilter.theilerStageValues}" layout="pageDirection">
				 		<f:selectItems value="#{solrFilter.theilerStageList}" />
				 		<pr:ajax update=":solrsearchform :solr_dataform :solr_title" listener="#{solrFilter.refresh}" />
				 	</h:selectManyCheckbox>
				</pr:tab>
				<pr:tab title="Sex">
				 	<h:selectManyCheckbox size="5" value="#{solrFilter.sexValues}" layout="pageDirection">
				 		<f:selectItems value="#{solrFilter.sexList}" />
				 		<pr:ajax update=":solrsearchform :solr_dataform :solr_title" listener="#{solrFilter.refresh}" />
				 	</h:selectManyCheckbox>
				</pr:tab>
				<pr:tab title="Specimen Type">
				 	<h:selectManyCheckbox size="5" value="#{solrFilter.specimenTypeValues}" layout="pageDirection">
				 		<f:selectItems value="#{solrFilter.specimenTypeList}" />
				 		<pr:ajax update=":solrsearchform :solr_dataform :solr_title" listener="#{solrFilter.refresh}" />
				 	</h:selectManyCheckbox>
				</pr:tab>
	 		</pr:accordionPanel>  
 		
			
		
		</pr:overlayPanel> 	
	    


	  <h:panelGrid id="panel" columns="1" border="0" cellpadding="10" cellspacing="1" >


 
		 <h:outputLink styleClass="plaintext" value="#{appRoot}/solr/solrGeneStrip.xhtml" rendered="#{solrTreeBean.geneCount > 0}">
			<h:outputText value="Genes (#{solrTreeBean.geneCount})" />
         </h:outputLink>
         <h:outputLabel value="Genes (#{solrTreeBean.geneCount})" rendered="#{solrTreeBean.geneCount == 0}"/>         
 

		 <h:outputLink styleClass="plaintext" value="#{appRoot}/solr/solrInsitu.xhtml" rendered="#{solrTreeBean.insituCount > 0}">
			<h:outputText value="In Situ (#{solrTreeBean.insituCount})" />
		 </h:outputLink>
         <h:outputLabel value="In Situ (#{solrTreeBean.insituCount})" rendered="#{solrTreeBean.insituCount == 0}"/>
 

  		 <h:outputLink styleClass="plaintext" value="#{appRoot}/solr/solrMicroarray.xhtml" rendered="#{solrTreeBean.microarrayCount > 0}">
         	<h:outputText  value="Microarray (#{solrTreeBean.microarrayCount})"/>
		 </h:outputLink>
         <h:outputLabel value="Microarray (#{solrTreeBean.microarrayCount}) " rendered="#{solrTreeBean.microarrayCount == 0}"/>

      
		 <h:outputLink styleClass="plaintext" value="#{appRoot}/solr/solrGenelist.xhtml" rendered="#{solrTreeBean.genelistCount > 0}">
         	<h:outputText  value="Gene Lists (#{solrTreeBean.genelistCount})"/>
			<f:param name="crumb" value="#{solrTreeBean.solrInput} &gt; Genelist" />
			<f:param name="gsinput" value="#{solrTreeBean.solrInput}" />
		 </h:outputLink>
        <h:outputLabel value="Gene Lists (#{solrTreeBean.genelistCount})"  rendered="#{solrTreeBean.genelistCount == 0}"/>


 		 <h:outputLink styleClass="plaintext" value="#{appRoot}/solr/solrTissueSummary.xhtml" rendered="#{solrTreeBean.tissueCount > 0}">
            <h:outputText  value="Tissue Summaries (#{solrTreeBean.tissueCount})"/>
			<f:param name="crumb" value="#{solrTreeBean.solrInput} &gt; Tissue Summary" />
			<f:param name="gsinput" value="#{solrTreeBean.solrInput}" />
		 </h:outputLink>
         <h:outputLabel value="Tissue Summaries (#{solrTreeBean.tissueCount})" rendered="#{solrTreeBean.tissueCount == 0}"/>

 
         <h:outputLabel value="Tutorials (#{solrTreeBean.tutorialCount})" />
    		
		 <h:outputLink styleClass="plaintext" value="#{appRoot}/solr/solrMouseStrains.xhtml" rendered="#{solrTreeBean.mouseStrainsCount > 0}">
         	<h:outputText  value="TG Mouse Strains (#{solrTreeBean.mouseStrainsCount})"/>
			<f:param name="gsinput" value="#{solrTreeBean.solrInput}" />
		 </h:outputLink>
         <h:outputLabel value="TG Mouse Strains (#{solrTreeBean.mouseStrainsCount})" rendered="#{solrTreeBean.mouseStrainsCount == 0}"/>

       
 		 <h:outputLink styleClass="plaintext" value="{appRoot}/solr/solrImagePage.xhtml" rendered="#{solrTreeBean.imagesCount > 0}"> 
         	<h:outputText  value="Images (#{solrTreeBean.imagesCount})"/>
			<f:param name="crumb" value="#{solrTreeBean.solrInput} &gt; Images" />
			<f:param name="gsinput" value="#{solrTreeBean.solrInput}" />
		 </h:outputLink>
         <h:outputLabel value="Images (#{solrTreeBean.imagesCount})" rendered="#{solrTreeBean.imagesCount == 0}"/>
		 
	</h:panelGrid> 

 	</h:form>
    </pr:overlayPanel>		
 	    
   	  
	
		
</ui:composition>

